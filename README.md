![симпла + 54фз](http://simplacms54fz.ru/design/fz/images/logo.png)

# SimplaCms54fz.ru - демо

Комплект файлов для проведения подготовительных работ к внедрению модуля, который позволяет печатать
кассовые чеки в соответствии с законом 54-ФЗ "Новый порядок применения ККТ" интернет-магазинам,
реализованным на SimplaCms на обычную кассу в вашем офисе.

## Состав 
- Демо версии файлов модуля
- Примеры необходимых модификаций в составе Cms.
- Модуль для проведения тестовых оплат 

*Дополнительно требуется*
- *KkmServer.exe - приобретается отдельно http://kkmserver.ru*

## Назначение
Возможность оценить установку модуля собственными силами до его приобретения.  
Заранее отладить обмен с KkmServer.exe (можно использовать беплатно для тестов).

## Инструкция

### Папка API
- Design.rename.php - Файл, который должен заменить стандартный. 

``` 
 Все файлы, которые перекрывают стандартные называются 
 xxx.rename.xxx 
 если Вы не модифицировали такой файл под свои цели, то просто его
 переименоваете , иначе переносите в свой вариант отличия
 это сделано, чтобы даже случайно не переписать настроенный вами файл  
```
- DesignSimpla.php - оригинальный файл системы Design.php или переименуйте
  свой Design.php как DesignSimpla.php и после Design.rename.php как Design.php
  
или просто добавьте в свой Design.php
```php
      $this->smarty->assign('kkmAssist',new KkmAssist());
```

### Папка design
#### подпапка kkmserver
Это не тема для сайта, а набор служебных шаблонов, которые можно настроить на свой вкус.       
#### подпапка add4kkm
Пример вкусностей, которые можно добавить.
![скриншот](http://simplacms54fz.ru/files/uploads/4git.png)
```
index.tpl

{if $smarty.session.admin == 'admin'}
  {$kkmAssist->kkm_status()}
{/if}
```
плашка с состоянием кассы для администратора при нахождении в админке и на страницах сайта

```
order.tpl
{include file='../../kkmserver.tpl'}
```
возможность вывести при желании посетителю информацию о чеке,
а главное **Вывод дополнительной панели для администратора**


### Папка kkmserver
admin.php - демо заглушка (после покупки заменить, указав логин/пароль )
#### подпапка dist
Образцы файлов, которые нужно настроить. См комментарии в файлах.
#### подпапка src
Демо заглушки реальных файлов, после покупки содержимое папки заменить целиком.

### Папка payment/TestMoney
Пример желательной доработки методов оплаты, что позволит знать точное время поступления
оплаты, а в дальнейшем возможно и автоматизировать возвраты.

### simpla
Добавление плашки о состоянии кассы в административном разделе.

### view
Контролер для печатной формы чека на обычном принтере
(.htaccess_add - правило для него)

## Отладка обмена с KkmServer

Можно настроить уже реальные конфиги для своего сайта

# С уважение
[SimplaCms54fz.ru](http://SimplaCms54fz.ru/)

 
